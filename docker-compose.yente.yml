# OpenSanctions yente - Self-hosted sanctions screening API
# Usage: docker compose -f docker-compose.yente.yml up -d
# First start takes 5-10 minutes to index data. Auto-updates every 30 min.
# Requires ~8GB RAM minimum (16GB recommended).

services:
  yente:
    image: ghcr.io/opensanctions/yente:latest
    ports:
      - "8000:8000"
    environment:
      YENTE_INDEX_URL: "http://yente-index:9200"
      YENTE_UPDATE_TOKEN: ""
    depends_on:
      yente-index:
        condition: service_started
    restart: unless-stopped

  yente-index:
    image: docker.elastic.co/elasticsearch/elasticsearch:8.15.0
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
      - ES_JAVA_OPTS=-Xms2g -Xmx2g
    volumes:
      - yente-index-data:/usr/share/elasticsearch/data
    restart: unless-stopped

volumes:
  yente-index-data:
